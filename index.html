<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="styles.css">
  <title>API</title>
</head>
<body>
  <section class='search-wrapper'>

  </section>
  <section class='content wrapper'>
    <input placeholder='Search for anything!' class='new-query'>
    <button class='query btn'>Search</button>
    <img src="#">
    <button class='refresh btn'>Refresh</button>
  </section>
  <script>

    const img = document.querySelector('img');
    const refresh = document.querySelector('.refresh')
    const searchBar = document.querySelector('.new-query')
    const searchBtn = document.querySelector('.query')

    let currSearch = ['cats']

    function clearSearch(){
      currSearch.length = 0
    }

    function newSearch(){
      if(searchBar.value != ''){
        clearSearch()
        currSearch.push(searchBar.value)
        fetch(`https://api.giphy.com/v1/gifs/translate?api_key=xMGN1yiwkO4svRXTebmXFgCTZEP3ULmo&s=${currSearch[0]}`, {mode: 'cors'})
          .then(function(response){
              return(response.json());
          })
          .then(function(response){
            img.src = response.data.images.original.url;
          })
      }
    }

    function getNewImage(){
      fetch(`https://api.giphy.com/v1/gifs/translate?api_key=xMGN1yiwkO4svRXTebmXFgCTZEP3ULmo&s=${currSearch[0]}`, {mode: 'cors'})
          .then(function(response){
              return(response.json());
          })
          .then(function(response){
            img.src = response.data.images.original.url;
          })
      }

      refresh.onclick = getNewImage
      searchBtn.onclick = newSearch

      getNewImage()

  </script>
</body>
</html>